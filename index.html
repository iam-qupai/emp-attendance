<!DOCTYPE html>
<html>
<head>
    <title>QR Code Attendance</title>
    <script>
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(sendData, showError);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function sendData(position) {
            let mobile = document.getElementById("mobile").value;
            let status = document.getElementById("status").value;
            let latitude = position.coords.latitude;
            let longitude = position.coords.longitude;

            if (mobile.trim() === "") {
                alert("Please enter your mobile number");
                return;
            }

            let url = "https://script.google.com/u/0/home/projects/1h7f9D8UntpWhiM5Gleo79UsxABCChV9WoVaHMYCrZeNe8r5ebOqcSaZQ"; // Replace with your Google Apps Script URL

            let data = {
                mobile: mobile,
                status: status,
                latitude: latitude,
                longitude: longitude
            };

            fetch(url, {
                method: "POST",
                body: JSON.stringify(data),
                headers: { "Content-Type": "application/json" }
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
            })
            .catch(error => console.error("Error:", error));
        }

        function showError(error) {
            alert("Error fetching location: " + error.message);
        }
    </script>
</head>
<body>
    <h2>QR Code Attendance</h2>
    <label>Mobile Number:</label>
    <input type="text" id="mobile" required><br>
    <label>Status:</label>
    <select id="status">
        <option value="Check-in">Check-in</option>
        <option value="Check-out">Check-out</option>
    </select><br>
    <button onclick="getLocation()">Mark Attendance</button>
</body>
</html>
